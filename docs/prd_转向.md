这是一个基于你最新反馈的**战术转向**文档。

既然目标从“高不可攀的技术极客”调整为“接地气的共情/发疯博主”，我们的核心策略就是：**降维打击，高频试错**。

利用已有的 **L4 级自动化架构**（CDP接管+自动修复），去降维打击那些还在手动发帖的“情感号”。不需要复杂的RAG逻辑，只需要精准的情绪捕捉。

---

# Project SiliconMomo：MVP 快速试错与优化方向文档

## 1. 核心战略调整：从“做精品”转向“跑流量”

* **当前痛点**：原定的“技术策展人”对素材理解深度要求过高，生图Prompt极难控制，导致冷启动困难，挫败感强。
* **新定位**：**赛博情绪垃圾桶 / 互联网嘴替**。
* **发疯文学**：宣泄式文案（“周一哪有不疯的”、“确诊为淡淡综合症”），击中打工人痛点。
* **共情文案**：深夜emo、恋爱脑醒悟、独居生活感悟。


* **优势**：文案逻辑简单，图文相关性要求低（一张好看的风景或美女图+一段毫不相关的发疯文字 = 爆款公式）。

## 2. 架构剥离与重组 (Architecture Refactoring)

为了适配“轻量级”运营，我们需要对现有的 `Supervisor` 和 Agent 职责做**减法**。

### 2.1 角色（Agent）职能降级

* **作家 (WriterAgent)**：
* **移除**：复杂的 RAG (检索增强生成) 逻辑，不需要去查阅技术文档。
* **新增**：**“情绪模板库”**。建立一个简单的 JSON 配置 (`emotions.json`)，包含：`["周一", "下班", "恋爱", "暴富"]`。
* **Prompt 调整**：由“总结文章核心观点”改为“模仿小红书爆款文风，多用Emoji，多用短句，语气要激烈/阴阳怪气/温柔刀”。


* **画家 (ArtistAgent)**：
* **简化**：不再根据文案生成强相关的图。
* **通用化**：生成通用的“视觉锚点”。
* *风格 A*：高质感美女（不露脸，侧影/背影，避免恐怖谷效应）。
* *风格 B*：赛博朋克/模糊滤镜风景（配合发疯文案）。


* **执行**：利用 `core/artist.py` 现有的即梦自动化能力，批量预生产图片入库，而不是“现写现画”，提高效率。


* **维修工 (RecoveryAgent)**：
* **保留核心**：这是你的技术壁垒。保持 `_ai_dynamic_fix` 的能力，确保在疯狂刷屏发帖时，遇到验证码或 UI 报错能自动处理，保证 24 小时无人值守。



### 2.2 状态机 (Supervisor) 简化

从复杂的“感知-思考-决策-执行”循环，简化为**线性流水线**：

1. **囤货模式 (Batch Mode)**：
* 凌晨 2-5 点（低峰期）：调用 `ArtistAgent` 疯狂生成图片，存入本地素材库。
* 调用 `WriterAgent` 生成 50 条候选文案。


2. **分发模式 (Dispatch Mode)**：
* 早/中/晚高峰：从库里随机抽一张图 + 抽一条文案 -> `Publisher` 发送。
* 不再每次发帖都走全流程，降低单次运行的错误率。



## 3. 具体技术优化清单 (Action Items)

基于已有代码的修改建议：

### A. 文案生成改造 (`core/writer.py`)

不需要复杂的 `knowledge_base.py` 抓取网页。直接硬编码几个“人设Prompt”：

```python
# 伪代码逻辑
STYLES = {
    "发疯": "你是一个崩溃的打工人，用感叹号和咆哮体，抱怨生活...",
    "治愈": "你是一个温柔的邻家姐姐，晚安语录，温暖人心...",
    "清醒": "毒舌闺蜜，骂醒恋爱脑..."
}
# 每次随机选一个 Style 生成文案

```

### B. 互动逻辑优化 (`actions/interaction.py`)

目前的“动脑概率” (`PROB_TRIGGER_THINKING`) 可以保留，但评论逻辑要改：

* **原逻辑**：分析帖子内容，发表见解。
* **新逻辑**：**“蹭流量”**。
* 在热门情感贴下评论：“太真实了”、“演我精神状态”、“吸好运”。
* 利用 `dom_helper` 快速定位评论区，只做简单互动，增加账号权重。



### C. 视觉素材解耦 (`core/artist.py`)

* **修改前**：Topic -> Generate Prompt -> Generate Image。
* **修改后**：直接维护一个 **Fixed Prompt List**（固定提示词库）。
* 例如：`"cinematic lighting, asian girl, blurred background, melancholic mood"`。
* 让即梦随机生成，不需要每次都用 LLM 去写画图 Prompt，因为情感号的图不需要逻辑，只需要“好看”和“氛围”。



## 4. 预期效果与里程碑

* **阶段一（Day 1-3）：素材库填充**
* 运行脚本，只生图、不发帖。验证 `artist.py` 的稳定性，存够 50 张高质量封面图。
* 人工筛选一次 Prompt，确保生成的图片审美在线。


* **阶段二（Day 4-7）：自动化发布**
* 开启“发疯文案”模式。
* 设定 `main.py` 定时任务，每天自动发 3 篇笔记。
* **观测指标**：不再看代码报不报错（有 Recovery 兜底），只看**小红书后台的小眼睛（浏览量）**。


* **阶段三（Day 7+）：数据反馈**
* 如果“发疯”流量好，就锁定该人设；如果“治愈”流量好，就切 Prompt。



**总结**：
我们现在的打法是**“用 L4 级的自动驾驶技术，去开滴滴”**。虽然大材小用，但这是验证系统稳定性最快的方式。把复杂的“内容创作”变成简单的“排列组合”，让账号先**活**起来。